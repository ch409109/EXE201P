@page
@model ClickCart.Pages.Customer.Products.IndexModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
	Layout = "_UserLayout";
	ViewBag.Title = "Sản phẩm";
}
<section id="advertisement">
	<div class="container">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1140 156">
			<!-- Background -->
			<rect width="1140" height="156" fill="#FF6B00" />

			<!-- Decorative elements -->
			<circle cx="900" cy="78" r="50" fill="#FFF" opacity="0.1" />
			<circle cx="950" cy="78" r="30" fill="#FFF" opacity="0.15" />
			<circle cx="1000" cy="78" r="40" fill="#FFF" opacity="0.1" />

			<!-- Main text -->
			<text x="40" y="65" font-family="Arial" font-size="36" font-weight="bold" fill="#FFFFFF">
				HOT DEAL - MUA
				1 TẶNG 1
			</text>
			<text x="40" y="105" font-family="Arial" font-size="24" fill="#FFFFFF">
				Áp dụng cho tất cả đồ uống có ga
				từ 15/1 - 31/1
			</text>

			<!-- Price -->
			<circle cx="800" cy="78" r="50" fill="#FFFFFF" />
			<text x="775" y="90" font-family="Arial" font-size="28" font-weight="bold" fill="#FF6B00">-50%</text>
		</svg>
	</div>
</section>
<section id="search-price-filter" style="margin-bottom: 20px;">
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<div class="search-price-filter-form">
					<!-- Search form -->
					<!-- Search and Filter Form -->
					<form method="post" class="search-filter-form">
						<div class="form-row">
							<!-- Search Form -->
							<div class="col-md-6 mb-3">
								<label for="search" class="form-label">Tìm kiếm sản phẩm</label>
								<input type="text" name="search" class="form-control" id="search" placeholder="Nhập tên sản phẩm..." value="@Request.Query["search"]" />
							</div>

							<!-- Price Range Selector -->
							<div class="col-md-6 mb-3">
								<label for="priceRange" class="form-label">Khoảng giá</label>
								<select name="priceRange" class="form-control" id="priceRange">
									<option value="0-100000">Dưới 100,000 VND</option>
									<option value="100000-200000">Trên 100,000 VND</option>
									<option value="200000-500000">Trên 200,000 VND</option>
									<option value="500000-1000000">Trên 500,000 VND</option>
								</select>
							</div>
						</div>

						<!-- Submit Button -->
						<div class="form-row">
							<div class="col-12 text-center">
								<button type="submit" class="btn btn-primary">Tìm kiếm</button>
							</div>
						</div>
					</form>

				</div>
			</div>
		</div>
	</div>
</section>

<section>
	<div class="container">
		<div class="row">
			<!-- Sidebar for categories -->
			<div class="col-sm-3">
				<div class="left-sidebar">
					<h2>Danh mục</h2>
					<div class="panel-group category-products" id="accordian">
						@foreach (var category in Model.Categories)
						{
							<div class="panel panel-default">
								<div class="panel-heading">
									<h4 class="panel-title">
										<a href="@Url.Page("Index", new { categoryId = category.CategoryID })">@category.CategoryName</a>
									</h4>
								</div>
							</div>
						}
					</div>
				</div>
			</div>

			<!-- Main product display -->
			<div class="col-sm-9 padding-right">
				<div class="features_items">
					<h2 class="title text-center">Sản phẩm</h2>

					@if (Model.Products.Any())
					{
						@foreach (var product in Model.Products)
						{
							<div class="col-sm-4">
								<div class="product-image-wrapper">
									<div class="single-products">
										<div class="productinfo text-center">
											<div style="width: 250px; height: 250px; padding: 10px; display: flex; justify-content: center; align-items: center; background-color: #f3f3f3;">
												<img style="max-width: 100%; max-height: 100%; object-fit: contain;"
												src="/common/images/products/@product.ImageUrl"
												alt="@product.ProductName" />
											</div>
											<h2>@product.Price.ToString("N0") VND</h2>
											<h3 style="height: 50px; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; font-size: 14px;">
												@product.ProductName
											</h3>

											<a href="#" class="btn btn-default add-to-cart">
												<i class="fa fa-shopping-cart"></i> Thêm vào giỏ hàng
											</a>
										</div>
									</div>
								</div>
							</div>
						}
					}
					else
					{
						<p class="text-center">Không có sản phẩm nào để hiển thị.</p>
					}
				</div>

				<!-- Pagination -->
				<ul class="pagination justify-content-center">
					@if (Model.CurrentPage > 1)
					{
						<li class="page-item">
							<a class="page-link" href="@Url.Page("Index", new { pageNumber = Model.CurrentPage - 1, categoryId = Model.CategoryId })"> Trước</a>
						</li>
					}
					@{
						var id = HttpContext.Session.GetInt32("CategoryId");
					}
					@for (int i = 1; i <= Model.TotalPages; i++)
					{
						<li class="page-item @(i == Model.CurrentPage ? "active" : "")">
							
							<a class="page-link" href="@Url.Page("Index", new { pageNumber = i, categoryId = id })">@i</a>
						</li>
					}

					@if (Model.CurrentPage < Model.TotalPages)
					{
						<li class="page-item">
							<a class="page-link" href="@Url.Page("Index", new { pageNumber = Model.CurrentPage + 1, categoryId = @id })">Tiếp &raquo;</a>
						</li>
					}
				</ul>
			</div>
		</div>
	</div>
</section>


<script src="js/jquery.js"></script>
<script src="js/price-range.js"></script>
<script src="js/jquery.scrollUp.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.prettyPhoto.js"></script>
<script src="js/main.js"></script>
<link href="~/css/product.css" rel="stylesheet" />
